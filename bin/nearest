#!/usr/bin/env node

// Finds the nearest file that matches the provided filename.
const path = require('path')
const fs = require('fs')

let [
  filename,
  fromPath
] = process.argv.slice(2)
const cwd = process.cwd()

if (fromPath) {
  if (!path.isAbsolute(fromPath)) {
    fromPath = path.resolve(cwd, fromPath)
  }
} else {
  fromPath = cwd
}

const pathParts = fromPath.split(path.sep)

while (pathParts.length) {
  const fullPath = path.join(pathParts.join(path.sep), filename)

  if (fs.existsSync(fullPath)) {
    process.stdout.write(fullPath)

    return
  }

  pathParts.pop()
}
